<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Basic Three + WebGl</title>
    <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
    <script type="text/javascript" src="three.js"></script>
    <script type="text/javascript" src="primitives.js"></script>
</head>
<body>
<div id="container" width="400" height="300"></div>
<script>
    /**
     * Created by Koen Hendriks.
     * User: koen_hendriks
     * Date: 10-3-14
     * Time: 0:53
     */

    var camera, scene, renderer;
    var cube, pointLight, vector;
    var mouseX, mouseY;
    var click = false;

    document.addEventListener('mousemove', function(e){
        mouseX = e.pageX;
        mouseY = e.pageY;
    }, false);

    document.addEventListener('mousedown', function(e){
        click = true;
        e.preventDefault();
        return false;
    }, false);

    document.addEventListener('mouseup', function(e){
        click = false;
        e.preventDefault();
        return false;
    }, false);


    init();
    animate();


    function init() {
        /**
         * Create a camera and give it a z position to use
         */
        camera = new THREE.PerspectiveCamera( 45, 1000 / 500, 1, 10000 );
        camera.position.z = 1000;

        //Create a scene
        scene = new THREE.Scene();

        //Create the (lambert) material for the cube
        var cubeMaterial =
                new THREE.MeshLambertMaterial(
                        {
                            color: 0xCC0000
                        });

        //Create the cube with the cubematerial
        cube = new THREE.Mesh(

                new THREE.CubeGeometry(100, 100, 100),

                cubeMaterial);

        // Add the cube to the scene
        scene.add(cube);

        //Create a new WebGL renderer
        renderer = new THREE.WebGLRenderer();
        renderer.setSize( 1000 , 500 );

        // create a point light
        pointLight =
                new THREE.PointLight(0xFFFFFF);

        // set its position
                pointLight.position.x = 200;
                pointLight.position.y = 200;
                pointLight.position.z = 1000;

        // add the light to the scene
                scene.add(pointLight);

        //Create the WebGl canvas in the container element
        document.getElementById('container').appendChild( renderer.domElement );

    }

    function animate() {

        // note: three.js includes requestAnimationFrame shim
        requestAnimationFrame( animate );

        //let's the camera look at the cube whenever its moved somehow
        camera.lookAt(cube.position);

        /**
         * If the X value of the mouse is valid and the mouse click is true
         * we change the rotation of the cube depending on the X and Y value of the mouse
         */
        if(mouseX != null && click == true)
        {
            cube.rotation.y = (mouseX / 200)
            cube.rotation.x = (mouseY / 100)
        }


        //Render everything into the WebGl render every frame
        renderer.render( scene, camera );

    }

</script>
</body>
</html>